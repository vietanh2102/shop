import{bw as d,ak as j,bA as f,r as g,N as b,j as e,bz as F,M as o,B as N,bB as I}from"./index-B3k4zI1L.js";import{r as n}from"./index-DNj-bk_U.js";import{F as k,d as A}from"./ColumnsTable-CmFHrMHi.js";import{F as s}from"./index-BZi1k8se.js";import{F as E}from"./index-BL4YFJKy.js";import"./Pagination-BuJAUc2O.js";import"./LeftOutlined-hYChZ9uW.js";import"./index-CVEmfaqu.js";import"./index-CUWDS_la.js";function D(){const t=d(r=>r.carts),m=d(r=>r.user),p=j(),[u]=f(),x=g.useMemo(()=>t.cart.reduce((i,a)=>i+a.quantity*a.price,0),[t.cart]),[c]=s.useForm(),[l,h]=b.useMessage(),y=async r=>{l.open({key:"ordering",type:"loading",content:"Loading..."});const i={userId:String(m.user.id),...r,orderAt:new Date().toLocaleDateString("pt-PT"),status:"processing",carts:t.cart};try{await u(i).unwrap(),l.open({key:"ordering",type:"success",content:"Order successful!",duration:2}),c.resetFields(),p(I())}catch(a){l.open({key:"ordering",type:"error",content:"Try again",duration:2}),console.error("Failed to save the post: ",a)}};return e.jsxs("div",{className:"max-w-[1170px] mx-auto px-8 lg:px-0",children:[e.jsxs("div",{className:"flex text-[38px] my-6",children:[e.jsx(F,{}),e.jsx("p",{className:" font-light ml-2",children:"Your Order"})]}),e.jsx(k,{columns:A,dataSource:t.cart,pagination:!1,rowKey:r=>r.id}),e.jsx("div",{className:"flex justify-end my-8",children:e.jsxs("p",{className:"text-[22px] font-bold",children:["Total:"," ",e.jsxs("span",{className:"text-red-400",children:[x.toLocaleString(),"Ä‘"]})]})}),h,e.jsxs("div",{className:"my-8",children:[e.jsx("p",{className:"text-[22px] font-bold my-8",children:"Information:"}),e.jsxs(s,{form:c,onFinish:y,id:"myForm",layout:"vertical",children:[e.jsx(s.Item,{name:"email",label:"Email",rules:n.email,hasFeedback:!0,children:e.jsx(o,{size:"large",placeholder:"Enter your Email"})}),e.jsx(s.Item,{name:"name",label:"Name",rules:n.name,hasFeedback:!0,children:e.jsx(o,{size:"large",placeholder:"Enter your Name"})}),e.jsx(s.Item,{name:"phone",label:"Phone",rules:n.phone,hasFeedback:!0,children:e.jsx(o,{size:"large",placeholder:"Enter your Phone"})}),e.jsx(s.Item,{name:"address",label:"Address",rules:n.address,hasFeedback:!0,children:e.jsx(o,{size:"large",placeholder:"Enter your Address"})})]}),e.jsx(E,{justify:"end",children:e.jsx(N,{form:"myForm",htmlType:"submit",type:"primary",children:"Order"},"submit")})]})]})}export{D as default};
